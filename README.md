# 飲み会幹事エージェントアプリ

## ローカルサーバー公開方法

- ngrok インストール

`brew install ngrok`

- ngrok サインアップ・ログイン

- ngnok のアクセストークン設定

`ngrok authtoken ACCESS_TOKEN`

- ngrok 起動

`ngrok http 3000`

## メモ

ぐるなび API
https://solution.gnavi.co.jp/service/gnavi_api/

### Cloudrun Function によるリマインド

工夫

4. Firestore の読み取りを効率化
   Firestore のコストを抑えるために、以下の方法を採用します：

ステータス管理: status: "pending"というフィールドを使って、まだリマインドしていない会議だけを対象にします。これにより、すでにリマインドした会議を再度チェックしなくて済みます。

データ更新: リマインドを送信した後は、会議の status を sent に更新します。これにより、次回以降のリマインド対象から外れます。

5. データの最適化
   Firestore から会議データをすべて取得するのではなく、リマインド日数と status を使ってフィルタリングを行います。例えば、where("remindBefore", "==", 1)のように、リマインド対象を絞り込むことでデータ量を削減します。

必要なデータだけを取得するようにクエリを最適化します（例えば、会議日程と参加者の LINE グループ ID のみを取得）。

6. コストを抑えるための工夫
   Firestore のコストは、読み取り回数や書き込み回数に基づいて課金されます。リマインド対象となるデータを絞り込んで、読み取り回数を最小化します。

定期的なリマインド処理（Cloud Scheduler で設定した実行タイミング）を使って、毎回すべての会議データをチェックするのではなく、リマインドが必要なデータのみを対象にします。
